---
title:  单页面静态服务器博客
date:   2016-3-15 12:00:00 +0800
tags: Web
---

世间已有很多博客系统, 比如jekyll, 扮演server的角色, 路由url, 转换markdown, 返回页面展示. 逻辑都在后台, 前端直接展示, 如需其他效果自行添加. 写起来很像php...



好吧, 其实我这个轮子造的很粗糙, 最近刚开始学习web技术, 正好觉得之前挪用的那个jekyll的模板太复杂, 于是就做了一个单页面博客(**就是本页面哦**), 欢迎批评.

## The 'Great' Idea

忽略上面的**great**, 虽然你刚才称赞了我的想法, 但那只是用来吸引你的标题. 

其实想法很简单, 单页面, js控制所有逻辑.  首先, js加载一份配置文件`blogs.json`, 里面描述了一些基本信息比如`title`, `tags`, `articles`等, 然后通过一系列**简单算法**填充到页面并绑定好必要的**点击事件**. 然后, 当点击一篇文章时, ajax加载文章, 利用一些现成的库进行**markdown**解析以及**代码高亮**处理.  

还有一些小细节:

1. 如何直接定位一篇文章? 解决办法是用GET参数title=xxx, js解析一下就知道应该直接加载哪篇, 否则展示首页.
2. 浏览器历史记录? h5操作一下history就行了, 监听一下popstate. 这样前进后退都OK了.
3. 没有3了.



css直接写, 因为内容很少, 没有使用sass或者less, js也很少, 也没有用那些高大上的coffee或者TypedScript, 总之就是很原滋原味的h5+css3+js. 代码量很少, 也方便修改调试.



## 用法

如果你真的打算用这个来做博客模板(如果能接受我的基本idea), 需要做的事情其实不多:

添加文章到`blogs`目录下, 记得编辑`homepage.md`, 然后修改`blogs.json`, 编辑`tags`, 和`articles`, 就好了. 其他需求就自行修改代码吧.


用node写了一个十分简单的小脚本**generate.js**放在`__utils`目录里面. 用来将blogs目录下的文件抽取头信息来生成`blogs.json`, 目前未递归检查子目录. 对头信息的格式有一定要求:
```
---	
title: xxx
date: xxx	
tags: [xx,xx]
--- 
```

* 开始和结尾至少需要3个以上的`-`.
* `title`, `date`, `tags`必不可少, 其中`tags`必须是数组. 其余信息可以自行添加.


## 最后

入门第一个web页面, 拍砖请排队.




